---
description: Gu칤a para el dise침o de experimentos, 칰til para comparar modelos de machine learning o para la planificaci칩n experimental en general.
globs: 
alwaysApply: false
---
# Dise침o de Experimentos (DoE): Una Gu칤a Pr치ctica

El **Dise침o de Experimentos (DoE)**, o *Design of Experiments*, es el enfoque sistem치tico para planificar, ejecutar y analizar pruebas con el fin de entender c칩mo un conjunto de variables de entrada influye en una o m치s variables de salida. En lugar de cambiar factores "a ver qu칠 pasa", el DoE proporciona un mapa para aprender de manera r치pida, eficiente y con validez estad칤stica.

---

## 1. 쯇ara Qu칠 Sirve el Dise침o de Experimentos?

Su prop칩sito fundamental es maximizar el aprendizaje minimizando el esfuerzo experimental. Te permite:

* 游꿢 **Identificar los factores clave:** Determinar qu칠 variables de entrada (**factores**) tienen un impacto real y significativo sobre el resultado (**respuesta**) y cu치les son irrelevantes.
* 游늳 **Cuantificar y optimizar:** No solo saber *qu칠* influye, sino *cu치nto*. Permite encontrar la combinaci칩n 칩ptima de niveles de factores para maximizar o minimizar una respuesta, o para alcanzar un valor objetivo.
* 游뱋 **Entender interacciones:** Descubrir si el efecto de un factor depende del nivel de otro. A veces, la clave no est치 en los factores individuales, sino en su combinaci칩n.
* 游눠 **Tomar decisiones basadas en datos:** Proporcionar una base s칩lida para mejorar un proceso, desarrollar un producto o configurar un modelo, sabiendo que las conclusiones son estad칤sticamente s칩lidas.

---

## 2. Conceptos Clave del DoE

Para dise침ar un buen experimento, es crucial dominar el siguiente vocabulario:

#### Elementos Fundamentales

* **Unidad Experimental:** Es el "sujeto" al que se le aplica una prueba. Puede ser un modelo de IA durante un entrenamiento, un lote de producci칩n, un usuario en una prueba A/B, etc.
* **Factores:** Son las **variables independientes** que manipulas intencionalmente porque crees que afectan el resultado.
    * **Cuantitativos:** Num칠ricos (ej., `learning_rate`, n칰mero de neuronas, temperatura).
    * **Cualitativos:** Categ칩ricos (ej., tipo de optimizador `['Adam', 'SGD']`, funci칩n de activaci칩n `['ReLU', 'Sigmoid']`).
* **Niveles:** Son los valores espec칤ficos que asignas a cada factor en el experimento (ej., para el factor `learning_rate`, los niveles podr칤an ser `0.01`, `0.001`, y `0.0001`).
* **Tratamiento:** Es una combinaci칩n 칰nica de niveles de todos los factores que se aplica a una unidad experimental. Si tienes 2 factores con 3 niveles cada uno, tienes `3 x 3 = 9` tratamientos distintos.

#### Tipos de Variables

* **Variable de Respuesta (o Dependiente):** Es la variable de salida que mides para evaluar el efecto de los factores (ej., *accuracy*, *RMSE*, tiempo de inferencia, costo de entrenamiento). Debe ser medible y relevante para tu objetivo.
* **Variable Interviniente (o de Ruido):** Es cualquier factor que podr칤a afectar la respuesta pero que *no* est치s estudiando activamente. La gesti칩n de estas variables es crucial.
    * **Controlables:** Se mantienen constantes para que no introduzcan "ruido" (ej., fijar la semilla aleatoria `random_seed`, usar siempre la misma versi칩n de librer칤as).
    * **No Controlables:** No se pueden fijar (ej., latencia de red, carga del servidor). Su efecto se mitiga mediante la aleatorizaci칩n.

#### Principios Estad칤sticos

* **Repetici칩n:** Repetir un mismo tratamiento varias veces. Esto es vital para estimar la variabilidad natural o "error experimental" (ej., entrenar un modelo 3 veces con los mismos hiperpar치metros para promediar el efecto de la inicializaci칩n aleatoria de pesos).
* **Aleatorizaci칩n:** Asignar los tratamientos a las unidades experimentales en un orden aleatorio. Esto ayuda a promediar el efecto de las variables intervinientes no controladas y previene sesgos sistem치ticos.
* **Bloques (Blocking):** Es una t칠cnica para neutralizar el efecto de una variable interviniente conocida. Si tienes que correr experimentos en dos GPUs diferentes (y crees que la GPU puede influir), tratas a cada GPU como un "bloque" y te aseguras de correr todos los tratamientos en ambas.

#### An치lisis e Interpretaci칩n

* **Efecto de un Factor:** Es el cambio promedio en la respuesta cuando se cambia el nivel de ese factor.
* **Interacci칩n entre Factores:** Ocurre cuando el efecto de un factor cambia seg칰n el nivel de otro. **Ejemplo:** El optimizador 'Adam' puede ser mejor con un `learning_rate` alto, mientras que 'SGD' es mejor con uno bajo. El efecto del "optimizador" depende del "learning_rate".
* **An치lisis de Varianza (ANOVA):** Es la herramienta estad칤stica principal en DoE. Descompone la variabilidad total de los datos y determina si la variaci칩n causada por tus factores es estad칤sticamente significativa en comparaci칩n con la variaci칩n aleatoria (el ruido).
* **Valor p (p-value):** El resultado clave del ANOVA. Un **valor p bajo (usualmente < 0.05)** es una fuerte evidencia en contra de la hip칩tesis nula (la cual postula que el factor *no* tiene efecto), lo que te permite concluir que el factor es **significativo**.

---

## 3. El Ciclo Experimental en 6 Pasos

El DoE no es lineal, es un ciclo de aprendizaje iterativo.

1.  游븷 **Definir el Problema y el Objetivo:** S칠 espec칤fico. 쯈u칠 pregunta quieres responder? 쯈u칠 m칠trica quieres mejorar? (Ej: "Determinar qu칠 combinaci칩n de optimizador y `learning_rate` minimiza el *RMSE* de nuestro modelo de regresi칩n").
2.  游댧 **Seleccionar Factores, Niveles y Respuesta:**
    * Haz una lluvia de ideas de todos los factores posibles.
    * Elige los m치s prometedores para tu experimento actual.
    * Define un rango de niveles realista para cada factor.
    * Aseg칰rate de que tu variable de respuesta se pueda medir de forma consistente.
3.  游늻 **Elegir el Dise침o Experimental:** Decide la estructura de tu experimento (ej., factorial completo, factorial fraccionado) en funci칩n de tus objetivos, n칰mero de factores y recursos (tiempo, costo computacional).
4.  游빍 **Ejecutar el Experimento:** Sigue el plan rigurosamente. 춰No olvides **aleatorizar** el orden de las corridas! Documenta cada resultado con precisi칩n.
5.  游늵 **Analizar los Datos:**
    * Primero, visualiza los datos. Busca patrones, tendencias y valores at칤picos.
    * Aplica las herramientas estad칤sticas (como ANOVA) para identificar los efectos e interacciones significativos.
    * Calcula la magnitud de dichos efectos.
6.  九꽲잺 **Concluir y Recomendar:**
    * Traduce los resultados estad칤sticos a un lenguaje pr치ctico.
    * Formula conclusiones claras ("El optimizador 'Adam' con un `learning_rate` de 0.001 es la mejor configuraci칩n encontrada").
    * Recomienda los siguientes pasos: implementar la mejora, o dise침ar un nuevo experimento para refinar los hallazgos. **Documenta todo**.

---

## 4. Ejemplos Pr치cticos

#### Ejemplo 1: Optimizaci칩n de un Modelo de IA

* **Objetivo:** Encontrar la combinaci칩n de `optimizador` y `n칰mero de neuronas` que maximiza el *accuracy* de un clasificador.
* **Factores y Niveles:**
    * Factor A (Cualitativo): **Optimizador** -> Niveles: `['Adam', 'SGD']`
    * Factor B (Cuantitativo): **N췈 Neuronas** -> Niveles: `[16, 32, 64]`
* **Dise침o:** Factorial completo 2x3 (6 tratamientos en total).
* **Respuesta:** *Accuracy* en el set de validaci칩n.
* **Repeticiones:** Realizar 3 repeticiones por cada tratamiento (total: 18 corridas) para promediar la aleatoriedad de la inicializaci칩n de pesos.
* **An치lisis:** Un ANOVA podr칤a revelar si el `optimizador` es significativo, si el `N췈 de Neuronas` es significativo, y si existe una **interacci칩n** entre ellos.

#### Ejemplo 2: Predicci칩n de Demanda de Buses (SITP)

* **Objetivo:** Entender qu칠 factores (algor칤tmicos y del problema) afectan m치s el error (*RMSE*) y el tiempo de entrenamiento.
* **Factores y Niveles:**
    * Factor A: **Funci칩n de Activaci칩n** -> `['ReLU', 'Tanh']`
    * Factor B: **Divisi칩n de Datos** -> `['D칤a de semana', 'Fin de semana']`
    * Factor C: **Algoritmo Gen칠tico (AG)** -> `['Selecci칩n A', 'Selecci칩n B']`
* **Respuestas:** *RMSE* y *Tiempo de Entrenamiento*.
* **Conceptos Ilustrados:** Uso de factores cualitativos, m칰ltiples variables de respuesta, y la necesidad de **bloquear** o **fijar** otras variables como la ruta del bus o los recursos computacionales para obtener comparaciones justas.